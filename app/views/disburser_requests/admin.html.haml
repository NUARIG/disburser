- content_for(:title) do
  Admin

#disburser_requests
  .disburser_requests_header
    %h4
      Admin
    = form_tag admin_disburser_requests_url, method: 'get', id: 'search_disburser_requests_form'  do
      .repository{ class: 'large-4 columns' }
        %label{for: 'repository_id' }
          Repository
        = select_tag :repository_id, options_for_select(@repositories.map { |repository| [repository.name, repository.id] }, (params[:repository_id].blank? ? '' : params[:repository_id])), { include_blank: 'all', class: 'repository '}
      .status{ class: 'large-4 columns' }
        %label{for: 'status' }
          Status
        = select_tag :status, options_for_select(DisburserRequest::DISBURSER_REQUEST_STATUSES_SANS_DRAFT.map { |status| [status, status] }, (params[:status].blank? ? '' : params[:status])), { include_blank: 'all', class: 'status'}
      .fulfillment_status{ class: 'large-4 columns' }
        %label{for: 'fulfillment_status' }
          Fulfillment Status
        = select_tag :fulfillment_status, options_for_select(DisburserRequest::DISBURSER_REQUEST_FULFILLMENT_STATUSES.map { |status| [status, status] }, (params[:fulfillment_status].blank? ? '' : params[:fulfillment_status])), { include_blank: 'all', class: 'status'}
      .feasibility{ class: 'large-2 columns' }
        %label{for: 'feasibility' }
          Feasibility
        = select_tag :feasibility, options_for_select([['yes', 'yes'],['no', 'no']], (params[:feasibility].blank? ? '' : params[:feasibility])), { include_blank: 'all', class: 'status'}
      .search_box{ class: 'large-6 columns' }
        %label{for: 'search' }
          Search
        = text_field_tag :search, (params[:search].nil? ? '' : params[:search]), type: 'search'
      .search_buttons{ class: 'large-4 columns' }
        %button{ type: 'submit', id: 'search_disburser_requests_button', class: 'tiny button' }
          Search
        = link_to 'Clear', admin_disburser_requests_url
  .disburser_requests_list
    = will_paginate @disburser_requests, renderer: FoundationPagination::Rails
    %table.hack_stack
      %thead
        %tr
          %th.repository{ width: 200 }
            = sortable 'repositories.name', 'Repository'
          %th.title{ width: 200 }
            = sortable 'title'
          %th.submitter{ width: 200 }
            = sortable 'users.last_name', 'Submitter'
          %th.investigator{ width: 200 }
            = sortable 'investigator'
          %th.irb_number{ width: 200 }
            = sortable 'irb_number', 'IRB Number'
          %th.feasibility
            = sortable 'feasibility'
          %th.status{ width: 200 }
            = sortable 'status'
          %th.fulfillment_status{ width: 200 }
            = sortable 'fulfillment_status'
          %th.edit{ width: 100 }
      %tbody
        - @disburser_requests.each do |disburser_request|
          = content_tag_for(:tr, disburser_request) do
            %td.repository
              = disburser_request.repository.name
            %td.title
              = disburser_request.title
            %td.submitter
              = disburser_request.submitter.full_name
            %td.investigator
              = disburser_request.investigator
            %td.irb_number
              = disburser_request.irb_number
            %td.feasibility
              = human_boolean(disburser_request.feasibility)
            %td.status
              = disburser_request.status
            %td.fulfillment_status
              = disburser_request.fulfillment_status
            %td.edit
              = link_to 'Edit', edit_admin_status_disburser_request_url(disburser_request), { class: 'edit_admin_status_disburser_request_link' }
    = will_paginate @disburser_requests, renderer: FoundationPagination::Rails